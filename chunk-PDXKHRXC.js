import{a as J}from"./chunk-ODF7RDQA.js";import{a as D}from"./chunk-I7EQPO3Y.js";import{a as q}from"./chunk-7O56VOBQ.js";import"./chunk-UFZCB36N.js";import"./chunk-P6OX5KW3.js";import{l as U}from"./chunk-7PAKQCDZ.js";import{a as $}from"./chunk-TWUZI4X4.js";import"./chunk-WOQCCJWR.js";import{i as O}from"./chunk-6ZKRTSRO.js";import{B as E,Fb as w,Jb as f,Lb as l,O as V,R as z,Sa as s,Vb as F,Xb as d,Zb as j,aa as m,bc as N,cc as T,dc as c,fa as _,fb as B,fc as H,ga as C,kc as P,nc as k,o as I,pa as g,qb as b,rb as y,sb as v,t as L,tb as h,ub as M,vb as p,wb as u,xb as a,yb as S,z as A}from"./chunk-QEG7R3DB.js";function K(t,i){if(t&1&&S(0,"app-course-card",3),t&2){let e=i.$implicit;p("course",e)("isPurchased",!0)}}function Q(t,i){t&1&&(u(0,"div",4)(1,"span"),d(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u0648\u0631\u0633\u0627\u062A \u062D\u0627\u0644\u064A\u0627."),a()())}function R(t,i){if(t&1){let e=w();u(0,"button",7),f("click",function(){let o=_(e).$implicit,n=l(3);return C(o!=="..."&&n.paginateHandler(+o-1))}),d(1),a()}if(t&2){let e=i.$implicit;l(3);let r=c(0);F("bg-primary",e===r+1),p("disabled",e==="..."),s(),j(" ",e," ")}}function W(t,i){if(t&1){let e=w();u(0,"div",6)(1,"button",7),f("click",function(){_(e);let o=l(2),n=c(0);return C(n>0&&o.paginateHandler(n-1))}),d(2," \xAB "),a(),h(3,R,2,4,"button",8,v),u(5,"button",7),f("click",function(){_(e);let o=l(2),n=c(0),x=c(1);return C(n<x.length&&o.paginateHandler(n+1))}),d(6," \xBB "),a()()}if(t&2){l(2);let e=c(0),r=c(1);s(),p("disabled",e==0),s(2),M(r),s(2),p("disabled",e==r.length-1)}}function X(t,i){if(t&1&&b(0,W,7,2,"div",6),t&2){l();let e=c(1);y(e.length?0:-1)}}function Y(t,i){t&1&&S(0,"div",5)}var G=class t{courseService=m(D);toastService=m($);userID=m(U).user()?.id;page=g(0);size=g(10);userCourses=g(Array(this.size()));ngOnInit(){this.courseService.getUserCourses(this.userID,1).pipe(z(({list:i,pagination:{total_pages:e}})=>E(()=>e>1,A(Array.from({length:e-1},(r,o)=>this.courseService.getUserCourses(this.userID,o+2))).pipe(L(r=>{let o=Array.from(new Map(i.concat(r.map(n=>n.list).flat()).map(n=>[n.id,n])).values());return o.reverse(),o})),I(i))),V(3)).subscribe({next:i=>{this.userCourses.set(i)},error:i=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:i.message})}})}paginateHandler(i){this.page.set(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=B({type:t,selectors:[["app-my-courses"]],features:[H([D])],decls:13,vars:12,consts:[[1,"flex","flex-col","gap-10"],[1,"text-lg","lg:text-3xl","font-bold","text-body-5","pb-4","border-b","border-dashed","border-base-content","dark:border-custom-1"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[3,"course","isPurchased"],["role","alert",1,"col-span-4","alert","alert-info","justify-center","alert-soft"],[1,"skeleton","self-center","w-4/5","lg:w-1/4","h-6","lg:h-10"],[1,"join","self-center"],[1,"join-item","btn","btn-square",3,"click","disabled"],[1,"join-item","btn","btn-square",3,"disabled","bg-primary"]],template:function(e,r){if(e&1&&(N(0)(1),P(2,"paginator"),u(3,"section",0)(4,"h2",1),d(5," \u0643\u0648\u0631\u0633\u0627\u062A\u064A "),a(),u(6,"div",2),h(7,K,1,2,"app-course-card",3,v,!1,Q,3,0,"div",4),P(10,"slice"),a(),b(11,X,1,1)(12,Y,1,0,"div",5),a()),e&2){let o=r.userCourses(),n=T(r.page());s();let x=T(k(2,3,o.length,r.size(),n));s(6),M(k(10,8,o,n*r.size(),n*r.size()+r.size())),s(4),y(x?11:12)}},dependencies:[q,O,J],encapsulation:2})};export{G as MyCourses};
