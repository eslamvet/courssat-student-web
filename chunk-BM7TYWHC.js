import{a as J}from"./chunk-T3QA4RIM.js";import{a as D}from"./chunk-I7EQPO3Y.js";import{a as $}from"./chunk-7TNCB6PQ.js";import"./chunk-UFZCB36N.js";import"./chunk-P6OX5KW3.js";import{l as O}from"./chunk-7PAKQCDZ.js";import{a as U}from"./chunk-TWUZI4X4.js";import"./chunk-WOQCCJWR.js";import{i as q}from"./chunk-6ZKRTSRO.js";import{B as E,Fb as w,Jb as f,Lb as l,O as V,R as z,Sa as c,Vb as j,Xb as p,aa as m,bc as N,cc as T,dc as a,fa as _,fb as B,fc as H,ga as C,kc as k,nc as P,o as L,pa as g,pb as F,qb as x,rb as y,sb as v,t as A,tb as h,ub as M,vb as d,wb as u,xb as s,yb as S,z as I}from"./chunk-QEG7R3DB.js";function K(t,i){if(t&1&&S(0,"app-course-card",3),t&2){let e=i.$implicit;d("course",e)("isPurchased",!0)}}function Q(t,i){t&1&&(u(0,"div",4)(1,"span"),p(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u0648\u0631\u0633\u0627\u062A \u062D\u0627\u0644\u064A\u0627."),s()())}function R(t,i){if(t&1){let e=w();u(0,"input",9),f("change",function(){let o=_(e).$implicit,n=l(3);return C(o!=="..."&&n.paginateHandler(+o-1))}),s()}if(t&2){let e=i.$implicit;l(3);let r=a(0);j("btn-disabled",e==="..."),d("checked",r===+e-1),F("aria-label",e)}}function W(t,i){if(t&1){let e=w();u(0,"div",6)(1,"button",7),f("click",function(){_(e);let o=l(2),n=a(0);return C(n>0&&o.paginateHandler(n-1))}),p(2," \xAB "),s(),h(3,R,1,4,"input",8,v),u(5,"button",7),f("click",function(){_(e);let o=l(2),n=a(0),b=a(1);return C(n<b.length&&o.paginateHandler(n+1))}),p(6," \xBB "),s()()}if(t&2){l(2);let e=a(0),r=a(1);c(),d("disabled",e==0),c(2),M(r),c(2),d("disabled",e==r.length-1)}}function X(t,i){if(t&1&&x(0,W,7,2,"div",6),t&2){l();let e=a(1);y(e.length?0:-1)}}function Y(t,i){t&1&&S(0,"div",5)}var G=class t{courseService=m(D);toastService=m(U);userID=m(O).user()?.id;page=g(0);size=g(10);userCourses=g(Array(this.size()));ngOnInit(){this.courseService.getUserCourses(this.userID,1).pipe(z(({list:i,pagination:{total_pages:e}})=>E(()=>e>1,I(Array.from({length:e-1},(r,o)=>this.courseService.getUserCourses(this.userID,o+2))).pipe(A(r=>{let o=Array.from(new Map(i.concat(r.map(n=>n.list).flat()).map(n=>[n.id,n])).values());return o.reverse(),o})),L(i))),V(3)).subscribe({next:i=>{this.userCourses.set(i)},error:i=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:i.message})}})}paginateHandler(i){this.page.set(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=B({type:t,selectors:[["app-my-courses"]],features:[H([D])],decls:13,vars:12,consts:[[1,"flex","flex-col","gap-10"],[1,"text-lg","lg:text-3xl","font-bold","text-body-5","pb-4","border-b","border-dashed","border-base-content","dark:border-custom-1"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[3,"course","isPurchased"],["role","alert",1,"col-span-4","alert","alert-info","justify-center","alert-soft"],[1,"skeleton","self-center","w-4/5","lg:w-1/4","h-6","lg:h-10"],[1,"join","self-center"],[1,"join-item","btn","btn-square",3,"click","disabled"],["type","radio",1,"join-item","btn","btn-square",3,"checked","btn-disabled"],["type","radio",1,"join-item","btn","btn-square",3,"change","checked"]],template:function(e,r){if(e&1&&(N(0)(1),k(2,"paginator"),u(3,"section",0)(4,"h2",1),p(5," \u0643\u0648\u0631\u0633\u0627\u062A\u064A "),s(),u(6,"div",2),h(7,K,1,2,"app-course-card",3,v,!1,Q,3,0,"div",4),k(10,"slice"),s(),x(11,X,1,1)(12,Y,1,0,"div",5),s()),e&2){let o=r.userCourses(),n=T(r.page());c();let b=T(P(2,3,o.length,r.size(),n));c(6),M(P(10,8,o,n*r.size(),n*r.size()+r.size())),c(4),y(b?11:12)}},dependencies:[$,q,J],encapsulation:2})};export{G as MyCourses};
