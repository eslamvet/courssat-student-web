import{g as A}from"./chunk-WOQCCJWR.js";import{r as y}from"./chunk-6ZKRTSRO.js";import{B as d,E as P,X as g,_a as R,a as m,aa as a,m as v,o as p,pa as f,t as I,z as E}from"./chunk-QEG7R3DB.js";var N=[{id:20,name:"\u0627\u0644\u062A\u0635\u0645\u064A\u0645",imageUrl:"images/design.svg",path:"/category/design"},{id:21,name:"\u0627\u0644\u0639\u0644\u0648\u0645 \u0648\u0627\u0644\u062A\u0643\u0646\u0648\u0644\u0648\u062C\u064A\u0627",imageUrl:"images/science.svg",path:"/category/coding-programming"},{id:19,name:"\u0627\u0644\u062A\u0633\u0648\u064A\u0642",imageUrl:"/images/marketing.svg",path:"/category/marketing"},{id:24,name:"\u0625\u062F\u0627\u0631\u0629 \u0623\u0639\u0645\u0627\u0644",imageUrl:"/images/business.svg",path:"/category/business"},{id:22,name:"\u0635\u0646\u0627\u0639\u0647 \u0627\u0644\u0645\u062D\u062A\u0648\u064A",imageUrl:"/images/cinema.svg",path:"/category/cinema"},{id:23,name:"\u0627\u0644\u0644\u063A\u0627\u062A",imageUrl:"images/language.svg",path:"/category/translator-language"}],c={SA:"SA",EG:"EG",OTHER:"OTHER"},F="https://app.fawaterk.com/fawaterkPlugin/fawaterkPlugin.min.js",k="https://tap-sdks.b-cdn.net/card/1.0.2/index.js",b="https://accounts.google.com/gsi/client";var h=class r{http=a(y);currencySignal=f({code:"\u200F$",value:1});currency=this.currencySignal.asReadonly();getCurrencyApi(e){return d(()=>[c.EG,c.SA].includes(e),this.http.get("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json"),p(null))}setCurrency(e){this.currencySignal.set(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var U=class r{router=a(A);http=a(y);renderer=a(R).createRenderer(document.body,null);userSignal=f(null);user=this.userSignal.asReadonly();setUser(e){this.userSignal.set(e)}updateUser(e){this.userSignal.update(t=>m(m({},t),e))}getUserProfile(e){return d(()=>!!e,this.http.get(`/api/User/Profile/${e}`),p(null))}editUserProfile(e){return this.http.put("/api/User/Client",e)}changePassword(e){return this.http.post("/api/User/ChangePassword",e)}uploadAttachment(e,t=3,s=!0){return this.http.post(`/api/FileManage/Upload?FileType=${t}&Isimage=${s}`,e)}logout(){this.userSignal.set(null),localStorage.removeItem("courssat-user-token"),localStorage.removeItem("courssat-user-id"),typeof google>"u"?w(b,this.renderer,e=>{e||google?.accounts?.id.disableAutoSelect()},!0):google.accounts.id.disableAutoSelect(),["/profile","/cart","/checkout"].some(e=>this.router.url.startsWith(e))&&this.router.navigateByUrl("/",{replaceUrl:!0})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var te=()=>{let r=a(U),e=a(h),t=G();return E([r.getUserProfile(localStorage.getItem("courssat-user-id")),e.getCurrencyApi(t)]).pipe(I(([s,n])=>(s&&r.setUser(s),n&&e.setCurrency({code:t=="EG"?" \u062C.\u0645":"\u200F \uE900",value:n.usd[t=="EG"?"egp":"sar"]}),"done")),P(()=>v))},G=()=>{let r=Intl.DateTimeFormat().resolvedOptions().timeZone;return r=="Africa/Cairo"?c.EG:r=="Asia/Riyadh"?c.EG:c.OTHER},oe=(r,e,t,s,n)=>{let u=s.map(o=>m({id:0,courseImg:o.coverImageURL,paymentId:0,courseName:o.courseName_AR,courseId:o.packageId?null:o.id,packagesId:o.packageId??null,originalValue:o.originalPrice,totalValue:o.discountPrice,cobonId:o.coupon?.id,coupon:o.coupon,instructorId:o.userId},o?.packageId&&{courseNames:o.relatedCourses?.map(i=>i.courseName_AR),courseIds:o.relatedCourses?.map(i=>i.id)}));return{id:0,userId:r.id,userName:r.firstName+(r.familyName??""),userEmail:r.email,totalOriginalValue:t,totalValue:e,cobonId:n,paymentDetailVMs:u}},w=(r,e,t,s=!1,n=document.body,u=2)=>{let o=0,i,C=()=>{o++;let S=document.querySelector(`script[src="${r}"]`);S&&e.removeChild(n,S);let l=e.createElement("script");e.setAttribute(l,"src",r),s&&e.setAttribute(l,"defer","true"),e.listen(l,"load",()=>{console.log(`Script loaded successfully: ${r}`),i&&clearTimeout(i),t&&t(null)}),e.listen(l,"error",()=>{console.error(`Failed to load script: ${r} (Attempt ${o}/${u})`),i&&clearTimeout(i),o<u?i=setTimeout(C,3e3):t&&t(new Error(`Failed to load script after ${u} attempts`))}),e.appendChild(n,l)};C.call(void 0)};function se(r="password"){return e=>{let t=e.get(r)?.value,s=e.get("confirmPassword")?.value;return t===s?null:{passwordsMismatch:!0}}}export{N as a,c as b,F as c,k as d,b as e,h as f,te as g,G as h,oe as i,w as j,se as k,U as l};
