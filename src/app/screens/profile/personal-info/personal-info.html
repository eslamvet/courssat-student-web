<section>
  <h2
    class="text-lg lg:text-3xl font-bold text-body-5 pb-4 border-b border-dashed border-base-content dark:border-custom-1 mb-6"
  >
    البيانات الشخصية
  </h2>
  <form
    class="lg:w-1/2 mb-8 lg:mb-10"
    [formGroup]="profileForm"
    (ngSubmit)="editUserProfileHandler()"
  >
    <div class="mb-5">
      <label class="text-sm lg:text-base text-body-5 block mb-2" for="user-name">الاسم كامل</label>
      <div class="w-full input input-lg validator bg-base-600">
        <input formControlName="firstName" class="text-right" id="user-name" type="text" required />
        <span class="iconify solar--user-circle-broken text-2xl text-base-content"></span>
      </div>
      <div class="validator-hint hidden">الاسم مطلوب</div>
    </div>
    <div class="mb-8 lg:mb-10">
      <label class="text-sm lg:text-base text-body-5 block mb-2" for="user-email"
        >البريد الالكتروني</label
      >
      <div class="w-full input input-lg validator bg-base-600">
        <input formControlName="email" class="text-right" id="user-email" type="email" required />
        <span class="iconify ic--outline-email text-2xl text-base-content"></span>
      </div>
      <div class="validator-hint hidden">
        {{ emailControl?.errors?.['required'] ? 'الايميل مطلوب' : 'الايميل غير صحيح' }}
      </div>
    </div>
    <button type="submit" class="btn btn-primary w-2/3 lg:w-1/2 h-12" [disabled]="loadingState()">
      <span>حفظ</span>@if(loadingState() === 'profile'){<span class="loading loading-spinner"></span
      >}
    </button>
  </form>
  <h2
    class="text-lg lg:text-2xl font-bold text-body-5 py-3 lg:py-4 border-b border-t border-dashed border-base-content dark:border-custom-1 mb-6"
  >
    تعديل كلمة المرور
  </h2>
  <form class="lg:w-1/2" [formGroup]="passwordForm" (ngSubmit)="changeUserPasswordHandler()">
    <div class="mb-5">
      <label class="text-sm lg:text-base text-body-5 block mb-2" for="user-old-password"
        >كلمه المررو القديمه</label
      >
      <div class="w-full input input-lg validator bg-base-600">
        <input
          formControlName="oldPassword"
          class="text-right"
          id="user-old-password"
          type="password"
          required
        />
        <span class="iconify solar--user-circle-broken text-2xl text-base-content"></span>
      </div>
      <div class="validator-hint hidden">كلمه المررو القديمه مطلوبه</div>
    </div>
    <div class="flex gap-3 mb-8 lg:mb-10">
      <div>
        <label class="text-sm lg:text-base text-body-5 block mb-2" for="user-password"
          >كلمة المرور الجديده</label
        >
        <div class="w-full input input-lg validator bg-base-600">
          <input
            formControlName="newPassword"
            class="text-right"
            id="user-password"
            type="password"
            required
            minlength="6"
          />
          <span class="iconify ic--lock-outline text-2xl text-base-content"></span>
        </div>
        <div class="validator-hint hidden">
          {{passwordControl?.errors?.['required'] ? 'كلمه المرور الجديده مطلوبه' : 'لا يجب ان تقل كلمه المرور عن ٦ حروف'}}
        </div>
      </div>
      <div>
        <label
          class="text-sm lg:text-base text-body-5 block mb-2 whitespace-nowrap"
          for="user-confirm-password"
          >تأكيد كلمة المرور الجديده</label
        >
        <div
          class="w-full input input-lg validator bg-base-600"
          [attr.aria-invalid]="passwordForm.errors?.['passwordsMismatch']"
        >
          <input
            formControlName="confirmPassword"
            class="text-right"
            id="user-confirm-password"
            type="password"
            required
          />
          <span class="iconify ic--lock-outline text-2xl text-base-content"></span>
        </div>
        <div class="validator-hint hidden">
          {{ confirmPasswordControl?.errors?.['required'] ? 'تأكيد كلمة المرور الجديده مطلوبه' : passwordForm.errors?.['passwordsMismatch'] ? 'كلمه المرور غير متطابقه' : '' }}
        </div>
      </div>
    </div>
    <button type="submit" class="btn btn-primary w-2/3 lg:w-1/2 h-12" [disabled]="loadingState()">
      <span>حفظ</span>@if(loadingState() === 'password'){<span
        class="loading loading-spinner"
      ></span
      >}
    </button>
  </form>
</section>
