@let certificates = userCertificates(); @let currentPage = page(); @let pages =
certificates.length|paginator:size():currentPage;
<section class="flex flex-col gap-10">
  <h2
    class="text-lg lg:text-3xl font-bold text-body-5 pb-4 border-b border-dashed border-base-content dark:border-custom-1"
  >
    شهاداتي
  </h2>
  <div class="lg:pe-25 flex flex-col gap-4">
    @for(certificate of certificates|slice:currentPage*size():currentPage*size()+size(); track
    $index){ @if(certificate){
    <a
      class="py-2 px-3 lg:px-6 border border-dashed border-base-content rounded-sm flex gap-3 lg:gap-6 cursor-pointer"
      [href]="certificatebaseUrl + certificate.id"
      target="_blank"
    >
      <img class="w-8 h-8 lg:w-14 lg:h-14" src="images/certificate.svg" alt="certificate-img" />
      <div class="flex-1 flex flex-col gap-3 lg:gap-4">
        <h3 class="text-sm lg:text-xl text-body-5">{{ certificate.courseName }}</h3>
        <div class="flex gap-7">
          <div class="flex items-center gap-2">
            <span class="iconify uil--calendar text-lg lg:text-2xl text-base-content"></span>
            <span class="text-xs lg:text-base text-base-content">{{
              certificate.courseEndDate | date : 'shortDate'
            }}</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="iconify mdi--ab-testing text-lg lg:text-2xl text-base-content"></span>
            <span class="text-xs lg:text-base text-base-content">100/100</span>
          </div>
        </div>
      </div>
    </a>
    } @else {
    <div class="flex gap-6">
      <div class="skeleton w-8 h-8 lg:w-14 lg:h-14"></div>
      <div class="flex-1">
        <div class="skeleton w-full h-8 lg:h-10 mb-3 lg:mb-4"></div>
        <div class="flex gap-7">
          <div class="skeleton flex-1 h-5 lg:h-6"></div>
          <div class="skeleton flex-1 h-5 lg:h-6"></div>
        </div>
      </div>
    </div>
    } } @empty {
    <div role="alert" class="col-span-4 alert alert-info justify-center alert-soft">
      <span>لا توجد شهادات حاليا.</span>
    </div>
    }
  </div>
  @if(pages){ @if(pages.length){
  <div class="join self-center">
    <button
      class="join-item btn btn-square"
      [disabled]="currentPage == 0"
      (click)="currentPage > 0 && paginateHandler(currentPage - 1)"
    >
      «
    </button>
    @for(page of pages;track $index){
    <button
      class="join-item btn btn-square"
      [disabled]="page === '...'"
      [class.bg-primary]="page === currentPage + 1"
      (click)="page !== '...' && paginateHandler(+page - 1)"
    >
      {{ page }}
    </button>
    }
    <button
      class="join-item btn btn-square"
      [disabled]="currentPage == pages.length - 1"
      (click)="currentPage < pages.length && paginateHandler(currentPage + 1)"
    >
      »
    </button>
  </div>
  } } @else{
  <div class="skeleton self-center w-4/5 lg:w-1/4 h-6 lg:h-10"></div>
  }
</section>
