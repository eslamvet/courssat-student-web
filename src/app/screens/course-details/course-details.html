@let course = courseSignal();
<div class="container">
  <div class="grid grid-cols-4 gap-8 border-b border-b-base-content py-10">
    <div class="col-span-3">
      <app-course-video
        [title]="course.courseName_AR"
        [activeLesson]="course.topics | activeLesson"
        (nextVideo)="loadNextVideoHandler($event)"
      />
      <app-course-tabs [(activeTap)]="activeTap" />
      <ng-container>
        @switch (activeTap()) { @case ('overview'){
        <app-course-overview
          [description]="course.courseDescription_AR"
          [courseDataVMS]="course.courseDataVMs!"
        />
        } @case ('content'){
        <app-course-content
          [topics]="course.topics"
          [isPaid]="!!course.isPaied"
          [instructorId]="course.userId!"
          (setActiveLesson)="setActiveLessonHandle($event)"
        />
        } @case ('reviews'){
        <app-course-reviews [customReviews]="course.reviews" [courseId]="course.id" />
        } @default { }}
      </ng-container>
    </div>
    <div>
      <app-course-sidebar
        [keywords]="course.openKeys!"
        [studentsCount]="course.studentsCount"
        [lessonCount]="course.lessonCount"
        [instructorBrief]="course.instructorBrief"
        [instructorName]="course.firstName + ' ' + course.familyName"
        [hourCount]="course.hourCount"
        [discountPrice]="course.discountPrice!"
        [originalPrice]="course.originalPrice!"
        [isPaid]="!!course.isPaied"
        [instructorId]="course.userId!"
        [courseId]="course.id"
        [coupon]="course.coupon"
        [courseName]="course.courseName_AR"
        [courseImg]="course.coverImageURL"
        [courseRedirectUrl]="course.redirect_url"
        [coursePaymentLabel]="course.paymentLabel"
        (addToCart)="addToCartHandler()"
        (applyCoupon)="applyCouponHandler($event)"
        (changePrice)="changeCoursePriceHandler($event)"
      />
    </div>
  </div>
  <app-course-related-courses [courses]="relatedCourses()" />
</div>
