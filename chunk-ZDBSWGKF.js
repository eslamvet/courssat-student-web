import{a as R}from"./chunk-T3QA4RIM.js";import{a as D}from"./chunk-42GVY4ZT.js";import{a as K}from"./chunk-P6OX5KW3.js";import{l as G}from"./chunk-55P6PZPH.js";import{a as Q}from"./chunk-TWUZI4X4.js";import"./chunk-WOQCCJWR.js";import{g as J,i as O}from"./chunk-6ZKRTSRO.js";import{Ab as s,B as A,Bb as d,Fb as w,Gb as f,Kb as v,Lb as l,O as z,Pa as V,R as B,Sa as c,Vb as N,Xb as m,Yb as k,aa as u,bc as H,cc as P,dc as p,fa as g,fb as U,fc as $,ga as _,kc as E,mc as q,nc as T,o as L,pa as x,pb as j,qb as C,rb as b,sb as h,t as F,tb as S,ub as M,z as I,zb as a}from"./chunk-QEG7R3DB.js";function X(t,i){if(t&1&&(a(0,"a",5),d(1,"img",7),a(2,"div",8)(3,"h3",9),m(4),s(),a(5,"div",10)(6,"div",11),d(7,"span",12),a(8,"span",13),m(9),E(10,"date"),s()(),a(11,"div",11),d(12,"span",14),a(13,"span",13),m(14,"100/100"),s()()()()()),t&2){let e=l().$implicit,n=l();f("href",n.certificatebaseUrl+e.id,V),c(4),k(e.courseName),c(5),k(q(10,3,e.courseEndDate,"shortDate"))}}function Y(t,i){t&1&&(a(0,"div",6),d(1,"div",15),a(2,"div",16),d(3,"div",17),a(4,"div",10),d(5,"div",18)(6,"div",18),s()()())}function Z(t,i){if(t&1&&C(0,X,15,6,"a",5)(1,Y,7,0,"div",6),t&2){let e=i.$implicit;b(e?0:1)}}function ee(t,i){t&1&&(a(0,"div",3)(1,"span"),m(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0634\u0647\u0627\u062F\u0627\u062A \u062D\u0627\u0644\u064A\u0627."),s()())}function te(t,i){if(t&1){let e=w();a(0,"input",22),v("change",function(){let o=g(e).$implicit,r=l(3);return _(o!=="..."&&r.paginateHandler(+o-1))}),s()}if(t&2){let e=i.$implicit;l(3);let n=p(0);N("btn-disabled",e==="..."),f("checked",n===+e-1),j("aria-label",e)}}function ie(t,i){if(t&1){let e=w();a(0,"div",19)(1,"button",20),v("click",function(){g(e);let o=l(2),r=p(0);return _(r>0&&o.paginateHandler(r-1))}),m(2," \xAB "),s(),S(3,te,1,4,"input",21,h),a(5,"button",20),v("click",function(){g(e);let o=l(2),r=p(0),y=p(1);return _(r<y.length&&o.paginateHandler(r+1))}),m(6," \xBB "),s()()}if(t&2){l(2);let e=p(0),n=p(1);c(),f("disabled",e==0),c(2),M(n),c(2),f("disabled",e==n.length-1)}}function ne(t,i){if(t&1&&C(0,ie,7,2,"div",19),t&2){l();let e=p(1);b(e.length?0:-1)}}function re(t,i){t&1&&d(0,"div",4)}var W=class t{certificateService=u(D);toastService=u(Q);userID=u(G).user()?.id;page=x(0);size=x(10);userCertificates=x(Array(this.size()));certificatebaseUrl=K.baseUrl+"/api/FileManage/Image/5/false/";ngOnInit(){this.certificateService.getUserCertificates(this.userID,1).pipe(B(({list:i,pagination:{total_pages:e}})=>A(()=>e>1,I(Array.from({length:e-1},(n,o)=>this.certificateService.getUserCertificates(this.userID,o+2))).pipe(F(n=>{let o=Array.from(new Map(i.concat(n.map(r=>r.list).flat()).map(r=>[r.id,r])).values());return o.reverse(),o})),L(i))),z(3)).subscribe({next:i=>{this.userCertificates.set(i)},error:i=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:i.message})}})}paginateHandler(i){this.page.set(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=U({type:t,selectors:[["app-my-certificates"]],features:[$([D])],decls:13,vars:12,consts:[[1,"flex","flex-col","gap-10"],[1,"text-lg","lg:text-3xl","font-bold","text-body-5","pb-4","border-b","border-dashed","border-base-content","dark:border-custom-1"],[1,"lg:pe-25","flex","flex-col","gap-4"],["role","alert",1,"col-span-4","alert","alert-info","justify-center","alert-soft"],[1,"skeleton","self-center","w-4/5","lg:w-1/4","h-6","lg:h-10"],["target","_blank",1,"py-2","px-3","lg:px-6","border","border-dashed","border-base-content","rounded-sm","flex","gap-3","lg:gap-6","cursor-pointer",3,"href"],[1,"flex","gap-6"],["src","images/certificate.svg","alt","certificate-img",1,"w-8","h-8","lg:w-14","lg:h-14"],[1,"flex-1","flex","flex-col","gap-3","lg:gap-4"],[1,"text-sm","lg:text-xl","text-body-5"],[1,"flex","gap-7"],[1,"flex","items-center","gap-2"],[1,"iconify","uil--calendar","text-lg","lg:text-2xl","text-base-content"],[1,"text-xs","lg:text-base","text-base-content"],[1,"iconify","mdi--ab-testing","text-lg","lg:text-2xl","text-base-content"],[1,"skeleton","w-8","h-8","lg:w-14","lg:h-14"],[1,"flex-1"],[1,"skeleton","w-full","h-8","lg:h-10","mb-3","lg:mb-4"],[1,"skeleton","flex-1","h-5","lg:h-6"],[1,"join","self-center"],[1,"join-item","btn","btn-square",3,"click","disabled"],["type","radio",1,"join-item","btn","btn-square",3,"checked","btn-disabled"],["type","radio",1,"join-item","btn","btn-square",3,"change","checked"]],template:function(e,n){if(e&1&&(H(0)(1),E(2,"paginator"),a(3,"section",0)(4,"h2",1),m(5," \u0634\u0647\u0627\u062F\u0627\u062A\u064A "),s(),a(6,"div",2),S(7,Z,2,1,null,null,h,!1,ee,3,0,"div",3),E(10,"slice"),s(),C(11,ne,1,1)(12,re,1,0,"div",4),s()),e&2){let o=n.userCertificates(),r=P(n.page());c();let y=P(T(2,3,o.length,n.size(),r));c(6),M(T(10,8,o,r*n.size(),r*n.size()+n.size())),c(4),b(y?11:12)}},dependencies:[O,J,R],encapsulation:2})};export{W as MyCertificates};
