import{a as E}from"./chunk-J3QNXTMV.js";import{a as Y}from"./chunk-7O56VOBQ.js";import{b as te}from"./chunk-XERHVBPZ.js";import{a as ee}from"./chunk-42GVY4ZT.js";import{a as Z}from"./chunk-FVVB2AVY.js";import{a as W}from"./chunk-UFZCB36N.js";import"./chunk-P6OX5KW3.js";import{b as v,f as K,h as C,l as Q}from"./chunk-7PAKQCDZ.js";import{a as X}from"./chunk-TWUZI4X4.js";import{d as q}from"./chunk-WOQCCJWR.js";import{h as G,q as $}from"./chunk-6ZKRTSRO.js";import{Fb as O,Jb as y,Lb as s,O as R,Sa as n,Wb as w,Xb as l,Yb as x,Zb as f,a as N,aa as g,b as L,bc as j,cc as H,dc as p,fa as h,fb as D,fc as J,ga as P,ic as T,kc as k,mc as S,pa as V,qb as u,rb as m,sb as U,sc as z,tb as B,ub as F,vb as _,wb as a,xb as o,yb as c,z as M}from"./chunk-QEG7R3DB.js";var ae=(e,i)=>({"font-saudi-riyal":e,"text-2xl":i});function ne(e,i){if(e&1&&(a(0,"div",4),c(1,"img",16),k(2,"imgUrl"),o()),e&2){s();let t=p(0);n(),_("ngSrc",S(2,1,t.imageUrl,"package"))}}function oe(e,i){e&1&&c(0,"div",5)}function re(e,i){if(e&1&&(a(0,"h2",17),l(1),o(),a(2,"span",18),l(3),o()),e&2){s();let t=p(0);n(),f(" ",t.packageName_AR," "),n(2),x(t.departmentName??(t.courses==null||t.courses[0]==null?null:t.courses[0].departmentName))}}function le(e,i){e&1&&c(0,"div",19)(1,"div",20)}function ce(e,i){if(e&1&&(a(0,"p",21),l(1),o()),e&2){s(2);let t=p(0);n(),f(" ",t.packageDescription_AR," ")}}function se(e,i){e&1&&c(0,"div",22)(1,"div",22)(2,"div",22)(3,"div",23)}function de(e,i){if(e&1&&u(0,ce,2,1,"p",21)(1,se,4,0),e&2){s();let t=p(0);m(t.id?0:1)}}function ue(e,i){if(e&1&&(a(0,"p",24),l(1),o()),e&2){s(2);let t=p(0);n(),f(" ",t.packageDescription_AR," ")}}function me(e,i){e&1&&(a(0,"div",25),c(1,"div",26)(2,"div",26)(3,"div",26)(4,"div",27),o())}function pe(e,i){if(e&1&&u(0,ue,2,1,"p",24)(1,me,5,0,"div",25),e&2){s();let t=p(0);m(t.id?0:1)}}function ge(e,i){if(e&1&&(a(0,"div",28),c(1,"span",29),a(2,"span",30),l(3),o()(),a(4,"div",28),c(5,"span",31),a(6,"h5",30),l(7),o()()),e&2){s();let t=p(0);n(3),f("",t.courseCount," \u0643\u0648\u0631\u0633"),n(4),f(" ",(t.firstName??(t.courses==null||t.courses[0]==null?null:t.courses[0].firstName))+" "+(t.familyName??(t.courses==null||t.courses[0]==null?null:t.courses[0].familyName))," ")}}function xe(e,i){e&1&&c(0,"div",32)(1,"div",32)}function fe(e,i){if(e&1&&(a(0,"span",36),l(1),k(2,"number"),a(3,"span",36),l(4),o()()),e&2){let t=s(2),r=p(0);n(),x(S(2,4,r.originalPrice*t.currency.value,"1.0-0")),n(2),w(T(7,ae,t.isSaudi,t.isSaudi)),n(),x(t.currency.code)}}function _e(e,i){if(e&1){let t=O();a(0,"button",33),y("click",function(){h(t);let d=s();return P(d.addToCartHandler())}),l(1," \u0625\u0636\u0627\u0641\u0629 \u0644\u0633\u0644\u0629 \u0627\u0644\u0645\u0634\u062A\u0631\u064A\u0627\u062A "),o(),a(2,"button",34),y("click",function(){h(t);let d=s();return P(d.purchasePackageHandler())}),a(3,"span"),l(4,"\u0625\u0634\u062A\u0631\u0643 \u0627\u0644\u0622\u0646"),o(),a(5,"span",35),l(6),k(7,"number"),o(),a(8,"span",35),l(9),o(),u(10,fe,5,10,"span",36),o()}if(e&2){let t=s(),r=p(0);n(6),x(S(7,5,(r.discountPrice||r.originalPrice)*t.currency.value,"1.0-0")),n(2),w(T(8,ae,t.isSaudi,t.isSaudi)),n(),x(t.currency.code),n(),m(!t.isMobile&&r.discountPrice<r.originalPrice?10:-1)}}function ke(e,i){e&1&&c(0,"div",37)(1,"div",38)}function Se(e,i){if(e&1&&c(0,"app-course-card",13),e&2){let t=i.$implicit;_("course",t)}}function ve(e,i){e&1&&(a(0,"div",14)(1,"span"),l(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u0648\u0631\u0633\u0627\u062A \u062D\u0627\u0644\u064A\u0627\u064B."),o()())}function Ce(e,i){if(e&1&&(a(0,"dialog",15)(1,"div",39),c(2,"app-payment-methods",40),a(3,"div",41)(4,"form",42)(5,"button",43),l(6,"\u0627\u0644\u063A\u0627\u0621"),o()()()()()),e&2){let t=s(),r=p(0);n(2),_("courses",t.courseArr())("totalValue",r.discountPrice)("totalOriginalValue",r.originalPrice||r.discountPrice)}}var ie=class e{packageSignal=V({courses:Array(4)});courseArr=z(()=>[{id:this.packageSignal().id,firstName:this.packageSignal().firstName,familyName:this.packageSignal().familyName,courseName_AR:this.packageSignal().packageName_AR,coverImageURL:this.packageSignal().imageUrl,originalPrice:this.packageSignal().originalPrice,discountPrice:this.packageSignal().discountPrice,packageId:this.packageSignal().id,userId:this.packageSignal().userId,relatedCourses:this.packageSignal().courses,courseNames:this.packageSignal()?.courses?.map(i=>i.courseName_AR),courseIds:this.packageSignal()?.courses?.map(i=>i.id),packageName:this.packageSignal()?.packageName_AR}]);packageService=g(E);cartService=g(Z);toastService=g(X);currency=g(K).currency();routeParams=g(q).snapshot.params;user=g(Q).user;isSaudi=C()===v.SA;isMobile=matchMedia("(width <= 640px)").matches;ngOnInit(){M([this.packageService.getPackageDetails(this.routeParams.packageId,this.user()?.id),this.packageService.getCoursePackageJson()]).pipe(R(3)).subscribe({next:([i,{eg_packages:t,sa_packages:r,default_packages:d}])=>{let I=(C()===v.EG?t:C()===v.SA?r:d).find(b=>b.id==this.routeParams.packageId);I&&(i.pacakge.discountPrice=I.price),i.pacakge.originalPrice=i.courses.reduce((b,A)=>b+(A.originalPrice||A.discountPrice),0),this.packageSignal.set(L(N({},i.pacakge),{courses:i.courses}))},error:i=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:i.message})}})}addToCartHandler(){this.cartService.addToCart(this.courseArr()[0])}purchasePackageHandler(){document.getElementById("courssat_checkout_modal")?.showModal()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-package"]],features:[J([E,ee])],decls:26,vars:9,consts:[[1,"container","pt-7","pb-10","lg:pt-10","lg:pb-16"],[1,"bg-base-200","rounded-sm","py-6","px-4","lg:px-8","mb-8","lg:mb-12"],[1,"flex","flex-wrap","gap-4","lg:gap-6"],[1,"flex-1","lg:basis-1/4","lg:flex-none","min-h-27","lg:min-h-54","bg-package-card","p-5","lg:p-8.5"],[1,"relative","w-full","h-full"],[1,"skeleton","w-full","h-full"],[1,"flex-1"],[1,"flex","flex-wrap","justify-between","items-center","gap-3","mb-6"],[1,"my-4","hidden","lg:block","border-b","border-dashed","border-custom-1"],[1,"flex","flex-wrap","gap-4"],[1,"flex","basis-full","lg:basis-auto","items-center","gap-4"],[1,"flex-1","flex","lg:justify-end","gap-2","lg:gap-4"],[1,"grid","grid-cols-2","md:grid-cols-3","xl:grid-cols-4","gap-2.5","lg:gap-5"],[3,"course"],["role","alert",1,"col-span-4","alert","alert-info","justify-center","alert-soft"],["id","courssat_checkout_modal",1,"modal"],["fill","","priority","",3,"ngSrc"],[1,"lg:text-3xl","order-2","lg:order-1","font-bold","text-body-5"],[1,"badge","order-1","lg:order-2","badge-sm","lg:badge-lg","min-w-16","lg:min-w-25","lg:h-9","rounded-full","bg-base-300"],[1,"skeleton","w-full","lg:w-1/2","order-2","lg:order-1","h-7","lg:h-9"],[1,"skeleton","order-1","lg:order-2","h-7","w-16","lg:w-25","lg:h-9","rounded-full"],[1,"text-xl","text-base-content"],[1,"skeleton","w-full","h-6","mb-3"],[1,"skeleton","w-1/2","h-6"],[1,"text-xs","basis-full","text-base-content","mb-3"],[1,"w-full"],[1,"skeleton","w-full","h-5","mb-2"],[1,"skeleton","w-1/2","h-5","mb-3"],[1,"flex","items-center","gap-1"],[1,"iconify","solar--stopwatch-play-broken","text-base-content","text-lg","lg:text-2xl"],[1,"text-xs","lg:text-sm","text-base-content"],[1,"iconify","solar--user-circle-broken","text-lg","lg:text-xl","text-base-content"],[1,"skeleton","flex-1","h-5","lg:h-7"],[1,"flex-1","lg:flex-none","btn","btn-base","lg:btn-lg","lg:text-base","bg-base-500","text-primary","rounded-xs","border-primary","border-dashed","px-1","lg:px-12",3,"click"],[1,"flex-1","lg:flex-none","btn","btn-base","lg:btn-lg","lg:text-base","rounded-xs","btn-primary","px-1","lg:px-12",3,"click"],[1,"text-secondary"],[1,"text-base-content","line-through"],[1,"skeleton","flex-1","h-10","lg:flex-none","lg:w-40","lg:h-12.5"],[1,"skeleton","flex-1","h-10","lg:flex-none","lg:w-50","lg:h-12.5"],[1,"modal-box","max-w-3xl","max-h-9/10"],["customPaymentBtnClass","w-full",3,"courses","totalValue","totalOriginalValue"],[1,"modal-action","justify-stretch","sticky","bottom-0"],["method","dialog",1,"flex-1"],[1,"btn","btn-lg","btn-ghost","w-full"]],template:function(t,r){if(t&1&&(j(0),a(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3),u(5,ne,3,4,"div",4)(6,oe,1,0,"div",5),o(),a(7,"div",6)(8,"div",7),u(9,re,4,2)(10,le,2,0),o(),u(11,de,2,1),o(),u(12,pe,2,1),o(),c(13,"div",8),a(14,"div",9)(15,"div",10),u(16,ge,8,2)(17,xe,2,0),o(),a(18,"div",11),u(19,_e,11,11)(20,ke,2,0),o()()(),a(21,"div",12),B(22,Se,1,1,"app-course-card",13,U,!1,ve,3,0,"div",14),o()(),u(25,Ce,7,3,"dialog",15)),t&2){let d=H(r.packageSignal());n(5),m(d.id?5:6),n(4),m(d.id?9:10),n(2),m(r.isMobile?-1:11),n(),m(r.isMobile?12:-1),n(4),m(d.id?16:17),n(3),m(d.id?19:20),n(3),F(d.courses),n(3),m(d.id?25:-1)}},dependencies:[Y,$,te,G,W],encapsulation:2})};export{ie as PackageScreen};
