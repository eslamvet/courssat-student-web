import{a as ne}from"./chunk-HAMK3S2O.js";import{f as ee,j as te,n as A,o as ie}from"./chunk-E7G3M2PQ.js";import{$ as p,Bb as J,D as P,Eb as X,K as r,Lb as H,Ob as Y,Pb as k,Qb as I,R as o,Rb as T,Sa as K,X as h,Xa as l,Ya as U,Za as O,_ as E,a as u,aa as g,ab as y,b as S,ba as q,c as f,fb as Q,hb as M,k as x,n as s,pa as G,qb as V,rb as L,sa as b,t as v,tc as Z,vb as $,wb as W,xb as z,za as w}from"./chunk-2ZBRTNB4.js";var se=class a{cartSignal=G({items:JSON.parse(localStorage.getItem("cart-items")??"[]"),coupon:null});cart=this.cartSignal.asReadonly();toastService=g(ne);constructor(){Z(()=>{localStorage.setItem("cart-items",JSON.stringify(this.cartSignal().items))})}addToCart(n){this.cartSignal().items.find(e=>e.id==n.id)?this.toastService.addToast({id:Date.now(),type:"info",title:"\u062A\u0646\u0628\u064A\u0647",message:`${n.packageId?"\u0627\u0644\u0628\u0627\u0642\u0647 \u0645\u0648\u062C\u0648\u062F\u0647":"\u0627\u0644\u0643\u0648\u0631\u0633 \u0645\u0648\u062C\u0648\u062F"} \u0628\u0627\u0644\u0641\u0639\u0644 \u0641\u0649 \u0627\u0644\u0633\u0644\u0629`}):n.coupon&&this.cartSignal().coupon?this.toastService.addToast({id:Date.now(),type:"info",title:"\u062A\u0646\u0628\u064A\u0647",message:"\u0627\u0646\u062A \u0644\u062F\u064A\u0643 \u0628\u0627\u0644\u0641\u0639\u0644 \u0643\u0648\u0628\u0648\u0646 \u0641\u0649 \u0627\u0644\u0633\u0644\u0629 \u0642\u0645 \u0628\u0627\u0644\u063A\u0627\u0626\u0647 \u0645\u0646 \u0627\u0644\u0643\u0648\u0631\u0633 \u062D\u062A\u0649 \u064A\u0645\u0643\u0646\u0643 \u0627\u0636\u0627\u0641\u062A\u0647"}):(this.cartSignal.update(e=>u(S(u({},e),{items:[n,...e.items]}),n.coupon&&n.coupon.coboneType!==2&&{coupon:n.coupon})),this.toastService.addToast({id:Date.now(),type:"success",title:`\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 ${n.packageId?"\u0627\u0644\u0628\u0627\u0642\u0647":"\u0627\u0644\u0643\u0648\u0631\u0633"} \u0628\u0646\u062C\u0627\u062D`,iconClass:"solar--cart-check-outline"}))}setCart(n){this.cartSignal.set(n)}updateCart(n){this.cartSignal.update(n)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};var re=["stripeElementRef"];function pe(a,n){if(a&1&&X(0,2),a&2){let e=H();$("ngTemplateOutlet",e.loadingTemplate)}}var ce=(()=>{class a{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||a)(y(O))};static \u0275dir=M({type:a,selectors:[["","ngxStripeLoadingTemplate",""]]})}return a})(),R=new E("Stripe Publishable Key"),N=new E("Stripe Options"),j=new E("NGX_STRIPE_VERSION"),C=class{version;loader;window;key;options;stripe$=new x(void 0);stripe=this.stripe$.asObservable().pipe(P(n=>!!n));constructor(n,e,t,i,m){this.version=n,this.loader=e,this.window=t,this.key=i,this.options=m,this.loader.asStream().pipe(P(c=>c.loaded===!0),r(),v(()=>this.window.getNativeWindow().Stripe)).subscribe(c=>{let d=this.options?c(this.key,this.options):c(this.key);d.registerAppInfo(this.getNgxStripeAppInfo(this.version)),this.stripe$.next(d)})}getInstance(){return this.stripe$.getValue()}elements(n){return this.stripe.pipe(v(e=>e.elements(n)),r())}confirmPayment(n){return this.stripe.pipe(o(e=>s(e.confirmPayment(n))),r())}confirmAcssDebitPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmAcssDebitPayment(n,e,t))),r())}confirmUsBankAccountPayment(n,e){return this.stripe.pipe(o(t=>s(t.confirmUsBankAccountPayment(n,e))),r())}confirmAlipayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmAlipayPayment(n,e,t))),r())}confirmAuBecsDebitPayment(n,e){return this.stripe.pipe(o(t=>s(t.confirmAuBecsDebitPayment(n,e))),r())}confirmBancontactPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmBancontactPayment(n,e,t))),r())}confirmBilliePayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmBilliePayment(n,e,t))),r())}confirmBlikPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmBlikPayment(n,e,t))),r())}confirmBoletoPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmBoletoPayment(n,e,t))),r())}confirmCardPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmCardPayment(n,e,t))),r())}confirmCashappPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmCashappPayment(n,e,t))),r())}confirmCustomerBalancePayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmCustomerBalancePayment(n,e,t))),r())}confirmEpsPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmEpsPayment(n,e,t))),r())}confirmFpxPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmFpxPayment(n,e,t))),r())}confirmGiropayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmGiropayPayment(n,e,t))),r())}confirmGrabPayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmGrabPayPayment(n,e,t))),r())}confirmIdealPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmIdealPayment(n,e,t))),r())}confirmKlarnaPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmKlarnaPayment(n,e,t))),r())}confirmKonbiniPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmKonbiniPayment(n,e,t))),r())}confirmMobilepayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmMobilepayPayment(n,e,t))),r())}confirmMultibancoPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmMultibancoPayment(n,e,t))),r())}confirmOxxoPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmOxxoPayment(n,e,t))),r())}confirmP24Payment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmP24Payment(n,e,t))),r())}confirmPayNowPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmPayNowPayment(n,e,t))),r())}confirmPayPalPayment(n,e){return this.stripe.pipe(o(t=>s(t.confirmPayPalPayment(n,e))),r())}confirmPixPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmPixPayment(n,e,t))),r())}confirmPromptPayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmPromptPayPayment(n,e,t))),r())}confirmSepaDebitPayment(n,e){return this.stripe.pipe(o(t=>s(t.confirmSepaDebitPayment(n,e))),r())}confirmSofortPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmSofortPayment(n,e,t))),r())}confirmTwintPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmTwintPayment(n,e,t))),r())}confirmWechatPayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmWechatPayPayment(n,e,t))),r())}handleCardAction(n){return this.stripe.pipe(o(e=>s(e.handleCardAction(n))),r())}handleNextAction(n){return this.stripe.pipe(o(e=>s(e.handleNextAction(n))),r())}verifyMicrodepositsForPayment(n,e){return this.stripe.pipe(o(t=>s(t.verifyMicrodepositsForPayment(n,e))),r())}createRadarSession(){return this.stripe.pipe(o(n=>s(n.createRadarSession())),r())}collectBankAccountForPayment(n){return this.stripe.pipe(o(e=>s(e.collectBankAccountForPayment(n))),r())}createPaymentMethod(n){return this.stripe.pipe(o(e=>s(e.createPaymentMethod(n))),r())}createConfirmationToken(n){return this.stripe.pipe(o(e=>s(e.createConfirmationToken(n))),r())}retrievePaymentIntent(n){return this.stripe.pipe(o(e=>s(e.retrievePaymentIntent(n))),r())}confirmSetup(n){return this.stripe.pipe(o(e=>s(e.confirmSetup(n))),r())}confirmAcssDebitSetup(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmAcssDebitSetup(n,e,t))),r())}confirmUsBankAccountSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmUsBankAccountSetup(n,e))),r())}confirmAuBecsDebitSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmAuBecsDebitSetup(n,e))),r())}confirmBacsDebitSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmBacsDebitSetup(n,e))),r())}confirmBancontactSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmBancontactSetup(n,e))),r())}confirmCardSetup(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmCardSetup(n,e,t))),r())}confirmCashappSetup(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmCashappSetup(n,e,t))),r())}confirmIdealSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmIdealSetup(n,e))),r())}confirmPayPalSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmPayPalSetup(n,e))),r())}confirmSepaDebitSetup(n,e){return this.stripe.pipe(o(t=>s(t.confirmSepaDebitSetup(n,e))),r())}confirmSofortSetup(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmSofortSetup(n,e,t))),r())}confirmAffirmPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmAffirmPayment(n,e,t))),r())}confirmAfterpayClearpayPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmAfterpayClearpayPayment(n,e,t))),r())}verifyMicrodepositsForSetup(n,e){return this.stripe.pipe(o(t=>s(t.verifyMicrodepositsForSetup(n,e))),r())}collectBankAccountForSetup(n){return this.stripe.pipe(o(e=>s(e.collectBankAccountForSetup(n))),r())}retrieveSetupIntent(n){return this.stripe.pipe(o(e=>s(e.retrieveSetupIntent(n))),r())}processOrder(n){return this.stripe.pipe(o(e=>s(e.processOrder(n))),r())}retrieveOrder(n){return this.stripe.pipe(o(e=>s(e.retrieveOrder(n))),r())}paymentRequest(n){return this.getInstance().paymentRequest(n)}createToken(n,e){return this.stripe.pipe(o(t=>s(t.createToken(n,e))),r())}createSource(n,e){return this.stripe.pipe(o(t=>s(t.createSource(n,e))),r())}retrieveSource(n){return this.stripe.pipe(o(e=>s(e.retrieveSource(n))),r())}verifyIdentity(n){return this.stripe.pipe(o(e=>s(e.verifyIdentity(n))),r())}collectFinancialConnectionsAccounts(n){return this.stripe.pipe(o(e=>s(e.collectFinancialConnectionsAccounts(n))),r())}collectBankAccountToken(n){return this.stripe.pipe(o(e=>s(e.collectBankAccountToken(n))),r())}createEphemeralKeyNonce(n){return this.stripe.pipe(o(e=>s(e.createEphemeralKeyNonce(n))),r())}initCheckout(n){return this.stripe.pipe(v(e=>e.initCheckout(n)),r())}initEmbeddedCheckout(n){return this.stripe.pipe(o(e=>s(e.initEmbeddedCheckout(n))),r())}handleCardPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.handleCardPayment(n,e,t))),r())}confirmPaymentIntent(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmPaymentIntent(n,e,t))),r())}handleCardSetup(n,e,t){return this.stripe.pipe(o(i=>s(i.handleCardSetup(n,e,t))),r())}confirmSetupIntent(n,e,t){return this.stripe.pipe(o(i=>s(i.confirmSetupIntent(n,e,t))),r())}handleFpxPayment(n,e,t){return this.stripe.pipe(o(i=>s(i.handleFpxPayment(n,e,t))),r())}getNgxStripeAppInfo(n){return{name:"ngx-stripe",url:"https://ngx-stripe.dev",partner_id:"pp_partner_JR4l1rmvUoPP4V",version:n}}},D=(()=>{class a{platformId;constructor(e){this.platformId=e}getNativeWindow(){return A(this.platformId)?window:{}}static \u0275fac=function(t){return new(t||a)(p(w))};static \u0275prov=h({token:a,factory:a.\u0275fac})}return a})(),oe=(()=>{class a{platformId;constructor(e){this.platformId=e}getNativeDocument(){return A(this.platformId)?document:{}}static \u0275fac=function(t){return new(t||a)(p(w))};static \u0275prov=h({token:a,factory:a.\u0275fac})}return a})(),B=(()=>{class a{platformId;window;document;zone;status=new x({error:!1,loaded:!1,loading:!1});constructor(e,t,i,m){this.platformId=e,this.window=t,this.document=i,this.zone=m}asStream(){return this.load(),this.status.asObservable()}isReady(){return this.status.getValue().loaded}load(){if(ie(this.platformId))return;let e=this.window.getNativeWindow(),{loaded:t,loading:i,error:m}=this.status.getValue();if(e.hasOwnProperty("Stripe")){this.status.next({loaded:!0,loading:!1,error:!1});return}!t&&!i&&(this.status.next({loaded:!1,loading:!0,error:m}),this.zone.runOutsideAngular(()=>this.injectScript()))}injectScript(){let e=this.document.getNativeDocument().createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src="https://js.stripe.com/clover/stripe.js",e.onload=()=>{this.zone.run(()=>{this.status.next({loaded:!0,loading:!1,error:!1})})},e.onerror=()=>{this.zone.run(()=>{this.status.next({loaded:!1,loading:!1,error:!0})})},this.document.getNativeDocument().body.appendChild(e)}static \u0275fac=function(t){return new(t||a)(p(w),p(D),p(oe),p(U))};static \u0275prov=h({token:a,factory:a.\u0275fac})}return a})(),F=(()=>{class a{version;key;options;loader;window;stripe;constructor(e,t,i,m,c){this.version=e,this.key=t,this.options=i,this.loader=m,this.window=c,t&&(this.stripe=new C(this.version,this.loader,this.window,t,i))}getStripeReference(){return this.loader.asStream().pipe(P(e=>e.loaded===!0),v(()=>this.window.getNativeWindow().Stripe))}getInstance(){return this.stripe.getInstance()}setKey(e,t){return this.changeKey(e,t)}changeKey(e,t){return this.stripe=new C(this.version,this.loader,this.window,e,t),this.stripe}elements(e){return this.stripe.elements(e)}confirmPayment(e){return this.stripe.confirmPayment(e)}confirmAcssDebitPayment(e,t,i){return this.stripe.confirmAcssDebitPayment(e,t,i)}confirmUsBankAccountPayment(e,t){return this.stripe.confirmUsBankAccountPayment(e,t)}confirmAlipayPayment(e,t,i){return this.stripe.confirmAlipayPayment(e,t,i)}confirmAuBecsDebitPayment(e,t){return this.stripe.confirmAuBecsDebitPayment(e,t)}confirmBancontactPayment(e,t,i){return this.stripe.confirmBancontactPayment(e,t,i)}confirmBilliePayment(e,t,i){return this.stripe.confirmBilliePayment(e,t,i)}confirmBlikPayment(e,t,i){return this.stripe.confirmBlikPayment(e,t,i)}confirmBoletoPayment(e,t,i){return this.stripe.confirmBoletoPayment(e,t,i)}confirmCardPayment(e,t,i){return this.stripe.confirmCardPayment(e,t,i)}confirmCashappPayment(e,t,i){return this.stripe.confirmCashappPayment(e,t,i)}confirmCustomerBalancePayment(e,t,i){return this.stripe.confirmCustomerBalancePayment(e,t,i)}confirmEpsPayment(e,t,i){return this.stripe.confirmEpsPayment(e,t,i)}confirmFpxPayment(e,t,i){return this.stripe.confirmFpxPayment(e,t,i)}confirmGiropayPayment(e,t,i){return this.stripe.confirmGiropayPayment(e,t,i)}confirmGrabPayPayment(e,t,i){return this.stripe.confirmGrabPayPayment(e,t,i)}confirmIdealPayment(e,t,i){return this.stripe.confirmIdealPayment(e,t,i)}confirmKlarnaPayment(e,t,i){return this.stripe.confirmKlarnaPayment(e,t,i)}confirmKonbiniPayment(e,t,i){return this.stripe.confirmKonbiniPayment(e,t,i)}confirmMobilepayPayment(e,t,i){return this.stripe.confirmMobilepayPayment(e,t,i)}confirmMultibancoPayment(e,t,i){return this.stripe.confirmMultibancoPayment(e,t,i)}confirmOxxoPayment(e,t,i){return this.stripe.confirmOxxoPayment(e,t,i)}confirmP24Payment(e,t,i){return this.stripe.confirmP24Payment(e,t,i)}confirmPayNowPayment(e,t,i){return this.stripe.confirmPayNowPayment(e,t,i)}confirmPayPalPayment(e,t){return this.stripe.confirmPayPalPayment(e,t)}confirmPixPayment(e,t,i){return this.stripe.confirmPixPayment(e,t,i)}confirmPromptPayPayment(e,t,i){return this.stripe.confirmPromptPayPayment(e,t,i)}confirmSepaDebitPayment(e,t){return this.stripe.confirmSepaDebitPayment(e,t)}confirmSofortPayment(e,t,i){return this.stripe.confirmSofortPayment(e,t,i)}confirmTwintPayment(e,t,i){return this.stripe.confirmTwintPayment(e,t,i)}confirmWechatPayPayment(e,t,i){return this.stripe.confirmWechatPayPayment(e,t,i)}handleCardAction(e){return this.stripe.handleCardAction(e)}handleNextAction(e){return this.stripe.handleNextAction(e)}verifyMicrodepositsForPayment(e,t){return this.stripe.verifyMicrodepositsForPayment(e,t)}createRadarSession(){return this.stripe.createRadarSession()}collectBankAccountForPayment(e){return this.stripe.collectBankAccountForPayment(e)}createPaymentMethod(e){return this.stripe.createPaymentMethod(e)}createConfirmationToken(e){return this.stripe.createConfirmationToken(e)}retrievePaymentIntent(e){return this.stripe.retrievePaymentIntent(e)}confirmSetup(e){return this.stripe.confirmSetup(e)}confirmAcssDebitSetup(e,t,i){return this.stripe.confirmAcssDebitSetup(e,t,i)}confirmUsBankAccountSetup(e,t){return this.stripe.confirmUsBankAccountSetup(e,t)}confirmAuBecsDebitSetup(e,t){return this.stripe.confirmAuBecsDebitSetup(e,t)}confirmBacsDebitSetup(e,t){return this.stripe.confirmBacsDebitSetup(e,t)}confirmBancontactSetup(e,t){return this.stripe.confirmBancontactSetup(e,t)}confirmCardSetup(e,t,i){return this.stripe.confirmCardSetup(e,t,i)}confirmCashappSetup(e,t,i){return this.stripe.confirmCashappSetup(e,t,i)}confirmIdealSetup(e,t){return this.stripe.confirmIdealSetup(e,t)}confirmPayPalSetup(e,t){return this.stripe.confirmPayPalSetup(e,t)}confirmSepaDebitSetup(e,t){return this.stripe.confirmSepaDebitSetup(e,t)}confirmSofortSetup(e,t,i){return this.stripe.confirmSofortSetup(e,t,i)}confirmAffirmPayment(e,t,i){return this.stripe.confirmAffirmPayment(e,t,i)}confirmAfterpayClearpayPayment(e,t,i){return this.stripe.confirmAfterpayClearpayPayment(e,t,i)}verifyMicrodepositsForSetup(e,t){return this.stripe.verifyMicrodepositsForSetup(e,t)}collectBankAccountForSetup(e){return this.stripe.collectBankAccountForSetup(e)}retrieveSetupIntent(e){return this.stripe.retrieveSetupIntent(e)}processOrder(e){return this.stripe.processOrder(e)}retrieveOrder(e){return this.stripe.retrieveOrder(e)}paymentRequest(e){return this.stripe.paymentRequest(e)}createToken(e,t){return this.stripe.createToken(e,t)}createSource(e,t){return this.stripe.createSource(e,t)}retrieveSource(e){return this.stripe.retrieveSource(e)}verifyIdentity(e){return this.stripe.verifyIdentity(e)}collectFinancialConnectionsAccounts(e){return this.stripe.collectFinancialConnectionsAccounts(e)}collectBankAccountToken(e){return this.stripe.collectBankAccountToken(e)}createEphemeralKeyNonce(e){return this.stripe.createEphemeralKeyNonce(e)}initCheckout(e){return this.stripe.initCheckout(e)}initEmbeddedCheckout(e){return this.stripe.initEmbeddedCheckout(e)}handleCardPayment(e,t,i){return this.stripe.handleCardPayment(e,t,i)}confirmPaymentIntent(e,t,i){return this.stripe.confirmPaymentIntent(e,t,i)}handleCardSetup(e,t,i){return this.stripe.handleCardSetup(e,t,i)}confirmSetupIntent(e,t,i){return this.stripe.confirmSetupIntent(e,t,i)}handleFpxPayment(e,t,i){return this.stripe.handleFpxPayment(e,t,i)}static \u0275fac=function(t){return new(t||a)(p(j),p(R),p(N),p(B),p(D))};static \u0275prov=h({token:a,factory:a.\u0275fac})}return a})(),_=(()=>{class a{stripeService;constructor(e){this.stripeService=e}elements(e,t){return e?Object.keys(t).length>0?e.elements(t):e.elements():Object.keys(t).length>0?this.stripeService.elements(t):this.stripeService.elements()}paymentRequest(e,t){return e?e.paymentRequest(t):this.stripeService.paymentRequest(t)}mergeOptions(e,t){return!t||e&&e.classes?e||{}:!e||!e.classes?S(u({},e||{}),{classes:{base:t,complete:`${t}--complete`,empty:`${t}--empty`,focus:`${t}--focus`,invalid:`${t}--invalid`,webkitAutoFill:`${t}--webkit-autoFill`}}):e||{}}static \u0275fac=function(t){return new(t||a)(p(F))};static \u0275prov=h({token:a,factory:a.\u0275fac})}return a})(),ae=(()=>{class a{stripeElementsService;elementsOptions;stripe;elements=new l;_elements;state="notready";constructor(e){this.stripeElementsService=e}ngOnChanges(e){return f(this,null,function*(){this.state="starting";let t=this.elementsOptions,i=this.stripe;if(!i){this.state="notready";return}if(e.elementsOptions)if(this._elements){let m=Object.keys(t).reduce((c,d)=>(t[d]!==e.elementsOptions.previousValue[d]&&!["fonts","loader","clientSecret"].includes(d)&&(c[d]=t[d]),c),{});this._elements.update(m)}else this._elements=yield this.stripeElementsService.elements(i,t).toPromise(),this.elements.emit(this._elements),this.state="ready"})}ngOnInit(){return f(this,null,function*(){this.state==="notready"&&(this.state="starting",this._elements=yield this.stripeElementsService.elements(this.stripe).toPromise(),this.elements.emit(this._elements),this.state="ready")})}fetchUpdates(){return this._elements?s(this._elements.fetchUpdates()):null}update(e){return this._elements?this._elements.update(e):null}submit(){return this._elements?s(this._elements.submit()):null}getElement(e){if(!this._elements)return null;switch(e){case"address":return this._elements.getElement("address");case"paymentMethodMessaging":return this._elements.getElement("paymentMethodMessaging");case"auBankAccount":return this._elements.getElement("auBankAccount");case"card":return this._elements.getElement("card");case"cardNumber":return this._elements.getElement("cardNumber");case"cardExpiry":return this._elements.getElement("cardExpiry");case"cardCvc":return this._elements.getElement("cardCvc");case"iban":return this._elements.getElement("iban");case"linkAuthentication":return this._elements.getElement("linkAuthentication");case"expressCheckout":return this._elements.getElement("expressCheckout");case"payment":return this._elements.getElement("payment");case"paymentRequestButton":return this._elements.getElement("paymentRequestButton");case"shippingAddress":return this._elements.getElement("shippingAddress");default:return this._elements.getElement(e)}}static \u0275fac=function(t){return new(t||a)(y(_))};static \u0275dir=M({type:a,selectors:[["ngx-stripe-elements"],["","ngxStripeElements",""]],inputs:{elementsOptions:"elementsOptions",stripe:"stripe"},outputs:{elements:"elements"},features:[b]})}return a})();var je=(()=>{class a{stripeElementsService;elementsProvider;loadingTemplate;stripeElementRef;element;containerClass;options;elementsOptions;stripe;load=new l;blur=new l;cancel=new l;clicked=new l;confirm=new l;focus=new l;ready=new l;escape=new l;loaderror=new l;shippingaddresschange=new l;shippingratechange=new l;elements;state="notready";elementsSubscription;constructor(e,t){this.stripeElementsService=e,this.elementsProvider=t}ngOnChanges(e){return f(this,null,function*(){this.state="starting";let t=!1;!this.elementsProvider&&(e.elementsOptions||e.stripe||!this.elements)&&(this.elements=yield this.stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise(),t=!0);let i=this.stripeElementsService.mergeOptions(this.options,this.containerClass);(e.options||e.containerClass||!this.element||t)&&this.elements&&t&&this.createElement(i),this.state="ready"})}ngOnInit(){return f(this,null,function*(){let e=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.elementsProvider?this.elementsSubscription=this.elementsProvider.elements.subscribe(t=>{this.elements=t,this.createElement(e),this.state="ready"}):this.state==="notready"&&(this.state="starting",this.elements=yield this.stripeElementsService.elements(this.stripe).toPromise(),this.createElement(e),this.state="ready")})}ngOnDestroy(){this.element&&this.element.destroy(),this.elementsSubscription&&this.elementsSubscription.unsubscribe()}update(e){return this.element.update(e)}getLinkAuthenticationElement(){return this.element}createElement(e){this.element&&this.element.unmount(),this.element=this.elements.create("expressCheckout",e),this.element.on("blur",()=>this.blur.emit()),this.element.on("cancel",()=>this.cancel.emit()),this.element.on("click",t=>this.clicked.emit(t)),this.element.on("confirm",t=>this.confirm.emit(t)),this.element.on("focus",()=>this.focus.emit()),this.element.on("ready",t=>this.ready.emit(t)),this.element.on("escape",()=>this.escape.emit()),this.element.on("loaderror",t=>this.loaderror.emit(t)),this.element.on("shippingaddresschange",t=>this.shippingaddresschange.emit(t)),this.element.on("shippingratechange",t=>this.shippingratechange.emit(t)),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)}static \u0275fac=function(t){return new(t||a)(y(_),y(ae,8))};static \u0275cmp=Q({type:a,selectors:[["ngx-stripe-express-checkout"]],contentQueries:function(t,i,m){if(t&1&&Y(m,ce,5,O),t&2){let c;I(c=T())&&(i.loadingTemplate=c.first)}},viewQuery:function(t,i){if(t&1&&k(re,5),t&2){let m;I(m=T())&&(i.stripeElementRef=m.first)}},inputs:{containerClass:"containerClass",options:"options",elementsOptions:"elementsOptions",stripe:"stripe"},outputs:{load:"load",blur:"blur",cancel:"cancel",clicked:"clicked",confirm:"confirm",focus:"focus",ready:"ready",escape:"escape",loaderror:"loaderror",shippingaddresschange:"shippingaddresschange",shippingratechange:"shippingratechange"},features:[b],decls:3,vars:1,consts:[["stripeElementRef",""],[1,"field"],[3,"ngTemplateOutlet"]],template:function(t,i){t&1&&(W(0,"div",1,0),V(2,pe,1,1,"ng-container",2),z()),t&2&&(K(2),L(i.state!=="ready"&&i.loadingTemplate?2:-1))},dependencies:[te,ee],encapsulation:2})}return a})();var Be=(()=>{class a{stripeElementsService;elementsProvider;stripeElementRef;element;elements;containerClass;options;elementsOptions;stripe;appearance;clientSecret;doNotCreateUntilClientSecretIsSet=!1;load=new l;blur=new l;change=new l;focus=new l;ready=new l;escape=new l;loaderror=new l;state="notready";elementsSubscription;constructor(e,t){this.stripeElementsService=e,this.elementsProvider=t}ngOnChanges(e){return f(this,null,function*(){this.state="starting";let t=!1;!this.elementsProvider&&(e.elementsOptions||e.stripe||e.clientSecret||e.appearance||!this.elements)&&(this.elements=yield this.stripeElementsService.elements(this.stripe,u(u(u({},this.elementsOptions||{}),this.appearance?{appearance:this.appearance}:{}),this.clientSecret?{clientSecret:this.clientSecret}:{})).toPromise(),t=!0);let i=this.stripeElementsService.mergeOptions(this.options,this.containerClass);(e.options||e.containerClass||!this.element||t)&&(this.element&&!t?this.update(i):this.elements&&t&&this.createElement(i)),this.state="ready"})}ngOnInit(){return f(this,null,function*(){let e=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.elementsProvider?this.elementsSubscription=this.elementsProvider.elements.subscribe(t=>{this.elements=t,this.createElement(e),this.state="ready"}):this.state==="notready"&&(this.state="starting",this.elements=yield this.stripeElementsService.elements(this.stripe,u(u(u({},this.elementsOptions||{}),this.appearance?{appearance:this.appearance}:{}),this.clientSecret?{clientSecret:this.clientSecret}:{})).toPromise(),this.createElement(e),this.state="ready")})}ngOnDestroy(){this.element&&this.element.destroy(),this.elementsSubscription&&this.elementsSubscription.unsubscribe()}update(e){return this.element.update(e)}collapse(){return this.element.collapse()}fetchUpdates(){return s(this.elements.fetchUpdates())}createElement(e={}){this.element&&this.element.unmount();try{this.element=this.elements.create("payment",e)}catch(t){throw this.elements=null,t}this.element.on("change",t=>this.change.emit(t)),this.element.on("blur",t=>this.blur.emit(t)),this.element.on("focus",t=>this.focus.emit(t)),this.element.on("ready",t=>this.ready.emit(t)),this.element.on("escape",t=>this.escape.emit(t)),this.element.on("loaderror",t=>this.loaderror.emit(t)),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)}static \u0275fac=function(t){return new(t||a)(y(_),y(ae,8))};static \u0275cmp=Q({type:a,selectors:[["ngx-stripe-payment"]],viewQuery:function(t,i){if(t&1&&k(re,5),t&2){let m;I(m=T())&&(i.stripeElementRef=m.first)}},inputs:{containerClass:"containerClass",options:"options",elementsOptions:"elementsOptions",stripe:"stripe",appearance:"appearance",clientSecret:"clientSecret",doNotCreateUntilClientSecretIsSet:"doNotCreateUntilClientSecretIsSet"},outputs:{load:"load",blur:"blur",change:"change",focus:"focus",ready:"ready",escape:"escape",loaderror:"loaderror"},features:[b],decls:2,vars:0,consts:[["stripeElementRef",""],[1,"field"]],template:function(t,i){t&1&&J(0,"div",1,0)},encapsulation:2})}return a})();var le=(()=>{class a{version;baseKey;baseOptions;loader;window;constructor(e,t,i,m,c){this.version=e,this.baseKey=t,this.baseOptions=i,this.loader=m,this.window=c}create(e,t){if(!e&&!this.baseKey)throw new Error("No key defined! Either you need to pass it as a parameter or define it when you call NgxStripeModule.forRoot()");return new C(this.version,this.loader,this.window,e||this.baseKey,t||this.baseOptions)}static \u0275fac=function(t){return new(t||a)(p(j),p(R),p(N),p(B),p(D))};static \u0275prov=h({token:a,factory:a.\u0275fac})}return a})();var ue="21.8.0";function he(a,n){return[B,F,le,_,D,oe,{provide:R,useValue:a},{provide:N,useValue:n},{provide:j,useValue:ue}]}function Fe(a,n){return q([...he(a,n)])}function qe(a,n){if(a)return g(le).create(a,n);if(g(R))return g(F);throw new Error("Publishable Key is required either global or pass as parameter")}export{se as a,ae as b,je as c,Be as d,Fe as e,qe as f};
