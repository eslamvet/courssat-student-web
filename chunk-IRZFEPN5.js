import{a as B}from"./chunk-VLL6WI5Q.js";import{a as _}from"./chunk-ZVAHVC77.js";import"./chunk-BZPY3R5F.js";import{a as D,b as l,c as E,d as P,e as q,f as e,g as T,j as k,k as I,m as U,n as M,o as R}from"./chunk-W4TJDPBM.js";import"./chunk-P6OX5KW3.js";import{j as N}from"./chunk-NLB5HRRX.js";import"./chunk-5I5XZVIT.js";import{h as A}from"./chunk-5NPNKZ3O.js";import"./chunk-VE6ZJ4JM.js";import{J as c,Jb as v,Pa as b,Sa as n,Xb as o,Zb as d,a as g,ec as x,fb as w,fc as S,jb as y,pb as h,qb as C,rb as F,ta as f,vb as m,wb as i,xb as u,yb as a}from"./chunk-VRT4WXDD.js";function V(s,r){s&1&&a(0,"span",21)}var L=class s extends B{signupForm=new q({firstName:new e("",{nonNullable:!0,validators:[l.required]}),email:new e("",{nonNullable:!0,validators:[l.required,l.email]}),password:new e("",{nonNullable:!0,validators:[l.required,l.minLength(6)]}),confirmPassword:new e("",{nonNullable:!0,validators:[l.required]}),familyName:new e(""),id:new e(""),countryId:new e(1),phoneNumber:new e(""),imageURL:new e(""),isActive:new e(!0),roleType:new e(0),endTrielDate:new e(""),isTrial:new e(""),experianceYearNum:new e(""),experianceBrief:new e(""),instructorBuyDegree:new e(""),departId:new e(null),jobId:new e(null),creationDate:new e(""),address:new e(""),city:new e(""),roles:new e([])},{validators:N()});get emailControl(){return this.signupForm.get("email")}get passwordControl(){return this.signupForm.get("password")}get confirmPasswordControl(){return this.signupForm.get("confirmPassword")}registerUserHandler(){if(this.signupForm.valid){if(this.loginMethod())return;this.loginMethod.set("normal"),this.authenticationService.registerUser(this.signupForm.getRawValue()).pipe(c(()=>this.loginMethod.set(null))).subscribe({next:r=>{if(r.code===200){if(!r.user.isActive){this.toastService.addToast({id:Date.now(),type:"info",title:"\u062A\u0646\u0628\u064A\u0647",message:"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0645\u062A\u0648\u0642\u0641 \u0628\u0631\u062C\u0627\u0621 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0627\u062F\u0627\u0631\u0629"});return}localStorage.setItem("courssat-user-token",r.token),localStorage.setItem("courssat-user-id",r.user.id),this.userService.setUser(r.user),this.toastService.addToast({id:Date.now(),type:"success",title:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0628\u0646\u062C\u0627\u062D",message:`\u0645\u0631\u062D\u0628\u0627 ${r.user.firstName+(r.user.familyName&&r.user.firstName!==r.user.familyName)?" "+r.user.familyName:""}`}),this.routeQueryParams.redirectURL?this.router.navigateByUrl(this.routeQueryParams.redirectURL,g({replaceUrl:!0},this.routeQueryParams.applyCoupon&&{queryParams:{applyCoupon:this.routeQueryParams.applyCoupon}})):this.router.navigateByUrl("/",{replaceUrl:!0})}else this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:r.message_AR??"\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644\u060C \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"})},error:r=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:r.message})}})}else this.signupForm.markAllAsTouched()}static \u0275fac=(()=>{let r;return function(t){return(r||(r=f(s)))(t||s)}})();static \u0275cmp=w({type:s,selectors:[["app-signup"]],hostAttrs:[1,"basis-full","lg:basis-1/2"],features:[S([_]),y],decls:47,vars:10,consts:[[1,"basis-1/2","flex","flex-col","gap-6","bg-custom-background-1","pt-10","pb-6","lg:py-16","px-4","lg:px-10","xl:px-16","2xl:px-23"],[1,"self-center","w-29","h-3.5","lg:w-auto","lg:h-auto",3,"src"],["id","googleBtn"],[1,"border-t","border-dashed","border-t-base-content"],[1,"flex","flex-col","gap-4","lg:gap-6",3,"ngSubmit","formGroup"],["for","user-name",1,"text-sm","lg:text-base","text-body-5","block","mb-2"],[1,"w-full","input","input-lg","validator","bg-base-600"],["formControlName","firstName","id","user-name","type","text","required","",1,"text-right"],[1,"iconify","solar--user-circle-broken","text-2xl","text-base-content"],[1,"validator-hint","hidden"],["for","user-email",1,"text-sm","lg:text-base","text-body-5","block","mb-2"],["formControlName","email","id","user-email","type","email","required","",1,"text-right"],[1,"iconify","ic--outline-email","text-2xl","text-base-content"],[1,"flex","gap-3","mb-6"],["for","user-password",1,"text-sm","lg:text-base","text-body-5","block","mb-2"],["formControlName","password","id","user-password","type","password","required","","minlength","6",1,"text-right"],[1,"iconify","ic--lock-outline","text-2xl","text-base-content"],["for","user-confirm-password",1,"text-sm","lg:text-base","text-body-5","block","mb-2"],["formControlName","confirmPassword","id","user-confirm-password","type","password","required","",1,"text-right"],[1,"flex","items-center","flex-col","lg:flex-row","gap-4","lg:gap-6"],["type","submit",1,"w-1/2","btn","btn-primary",3,"disabled"],[1,"loading","loading-spinner"],[1,"text-sm","text-neutral-content"],["routerLink","/auth/login",1,"btn","btn-link","px-0","text-primary","dark:text-base-content",3,"queryParams"]],template:function(p,t){p&1&&(i(0,"section",0),a(1,"img",1)(2,"div",2)(3,"div",3),i(4,"form",4),v("ngSubmit",function(){return t.registerUserHandler()}),i(5,"div")(6,"label",5),o(7,"\u0627\u0644\u0627\u0633\u0645 \u0643\u0627\u0645\u0644"),u(),i(8,"div",6),a(9,"input",7)(10,"span",8),u(),i(11,"div",9),o(12,"\u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),u()(),i(13,"div")(14,"label",10),o(15,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),u(),i(16,"div",6),a(17,"input",11)(18,"span",12),u(),i(19,"div",9),o(20),u()(),i(21,"div",13)(22,"div")(23,"label",14),o(24,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),u(),i(25,"div",6),a(26,"input",15)(27,"span",16),u(),i(28,"div",9),o(29),u()(),i(30,"div")(31,"label",17),o(32,"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),u(),i(33,"div",6),a(34,"input",18)(35,"span",16),u(),i(36,"div",9),o(37),u()()(),i(38,"div",19)(39,"button",20)(40,"span"),o(41,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),u(),C(42,V,1,0,"span",21),u(),i(43,"p",22),o(44," \u0644\u062F\u064A \u062D\u0633\u0627\u0628 \u0628\u0627\u0644\u0641\u0639\u0644\u061F "),i(45,"a",23),o(46,"\u062A\u0633\u062C\u064A\u0644 \u062F\u062E\u0648\u0644"),u()()()()()),p&2&&(n(),m("src",x("images/logo-",t.currentTheme(),".svg"),b),n(3),m("formGroup",t.signupForm),n(16),d(" ",!(t.emailControl==null||t.emailControl.errors==null)&&t.emailControl.errors.required?"\u0627\u0644\u0627\u064A\u0645\u064A\u0644 \u0645\u0637\u0644\u0648\u0628":"\u0627\u0644\u0627\u064A\u0645\u064A\u0644 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D"," "),n(9),d(" ",!(t.passwordControl==null||t.passwordControl.errors==null)&&t.passwordControl.errors.required?"\u0643\u0644\u0645\u0647 \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0647":"\u0644\u0627 \u064A\u062C\u0628 \u0627\u0646 \u062A\u0642\u0644 \u0643\u0644\u0645\u0647 \u0627\u0644\u0645\u0631\u0648\u0631 \u0639\u0646 \u0666 \u062D\u0631\u0648\u0641"," "),n(4),h("aria-invalid",t.signupForm.errors==null?null:t.signupForm.errors.passwordsMismatch),n(4),d(" ",!(t.confirmPasswordControl==null||t.confirmPasswordControl.errors==null)&&t.confirmPasswordControl.errors.required?"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0647":t.signupForm.errors!=null&&t.signupForm.errors.passwordsMismatch?"\u0643\u0644\u0645\u0647 \u0627\u0644\u0645\u0631\u0648\u0631 \u063A\u064A\u0631 \u0645\u062A\u0637\u0627\u0628\u0642\u0647":""," "),n(2),m("disabled",t.loginMethod()),n(3),F(t.loginMethod()==="normal"?42:-1),n(3),m("queryParams",t.routeQueryParams))},dependencies:[R,T,D,E,P,U,M,k,I,A],encapsulation:2})};export{L as Signup};
