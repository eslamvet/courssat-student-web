import{g as b}from"./chunk-AZGJ3U7A.js";import{r as f}from"./chunk-Q23L6LWU.js";import{B as p,E as P,X as d,_a as R,a as u,aa as a,m as U,o as m,pa as g,t as I,z as C}from"./chunk-ZPGQN5EY.js";var N=[{id:20,name:"\u0627\u0644\u062A\u0635\u0645\u064A\u0645",imageUrl:"images/design.svg",path:"/category/design"},{id:21,name:"\u0627\u0644\u0639\u0644\u0648\u0645 \u0648\u0627\u0644\u062A\u0643\u0646\u0648\u0644\u0648\u062C\u064A\u0627",imageUrl:"images/science.svg",path:"/category/coding-programming"},{id:19,name:"\u0627\u0644\u062A\u0633\u0648\u064A\u0642",imageUrl:"images/marketing.svg",path:"/category/marketing"},{id:24,name:"\u0625\u062F\u0627\u0631\u0629 \u0623\u0639\u0645\u0627\u0644",imageUrl:"images/business.svg",path:"/category/business"},{id:22,name:"\u0633\u064A\u0646\u0645\u0627",imageUrl:"images/cinema.svg",path:"/category/cinema"},{id:23,name:"\u0627\u0644\u0644\u063A\u0627\u062A",imageUrl:"images/language.svg",path:"/category/translator-language"}],F="https://app.fawaterk.com/fawaterkPlugin/fawaterkPlugin.min.js",k="https://tap-sdks.b-cdn.net/card/1.0.2/index.js",w="https://accounts.google.com/gsi/client";var h=class r{http=a(f);currencySignal=g({code:"\u200F$",value:1});currency=this.currencySignal.asReadonly();getCurrencyApi(e){return p(()=>["EG","SA"].includes(e),this.http.get("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json"),m(null))}setCurrency(e){this.currencySignal.set(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})};var y=class r{router=a(b);http=a(f);renderer=a(R).createRenderer(document.body,null);userSignal=g(null);user=this.userSignal.asReadonly();setUser(e){this.userSignal.set(e)}updateUser(e){this.userSignal.update(t=>u(u({},t),e))}getUserProfile(e){return p(()=>!!e,this.http.get(`/api/User/Profile/${e}`),m(null))}editUserProfile(e){return this.http.put("/api/User/Client",e)}changePassword(e){return this.http.post("/api/User/ChangePassword",e)}uploadAttachment(e,t=3,i=!0){return this.http.post(`/api/FileManage/Upload?FileType=${t}&Isimage=${i}`,e)}logout(){this.userSignal.set(null),localStorage.removeItem("courssat-user-token"),localStorage.removeItem("courssat-user-id"),typeof google>"u"?A(w,this.renderer,e=>{e||google?.accounts?.id.disableAutoSelect()},!0):google.accounts.id.disableAutoSelect(),["/profile","/cart","/checkout"].some(e=>this.router.url.startsWith(e))&&this.router.navigateByUrl("/",{replaceUrl:!0})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})};var X=()=>{let r=a(y),e=a(h),t=T();return C([r.getUserProfile(localStorage.getItem("courssat-user-id")),e.getCurrencyApi(t)]).pipe(I(([i,n])=>(i&&r.setUser(i),n&&e.setCurrency({code:t=="EG"?" \u062C.\u0645":"\u200F \uE900",value:n.usd[t=="EG"?"egp":"sar"]}),"done")),P(()=>U))},T=()=>{let r=Intl.DateTimeFormat().resolvedOptions().timeZone;return r=="Africa/Cairo"?"EG":r=="Asia/Riyadh"?"SA":"Other"},ee=(r,e,t,i,n)=>{let c=i.map(o=>u({id:0,courseImg:o.coverImageURL,paymentId:0,courseName:o.courseName_AR,courseId:o.packageId?null:o.id,packagesId:o.packageId??null,originalValue:o.originalPrice,totalValue:o.discountPrice,cobonId:o.coupon?.id,coupon:o.coupon,instructorId:o.userId},o?.packageId&&{courseNames:o.relatedCourses?.map(s=>s.courseName_AR),courseIds:o.relatedCourses?.map(s=>s.id)}));return{id:0,userId:r.id,userName:r.firstName+(r.familyName??""),userEmail:r.email,totalOriginalValue:t,totalValue:e,cobonId:n,paymentDetailVMs:c}},A=(r,e,t,i=!1,n=document.body,c=2)=>{let o=0,s,v=()=>{o++;let S=document.querySelector(`script[src="${r}"]`);S&&e.removeChild(n,S);let l=e.createElement("script");e.setAttribute(l,"src",r),i&&e.setAttribute(l,"defer","true"),e.listen(l,"load",()=>{console.log(`Script loaded successfully: ${r}`),s&&clearTimeout(s),t&&t(null)}),e.listen(l,"error",()=>{console.error(`Failed to load script: ${r} (Attempt ${o}/${c})`),s&&clearTimeout(s),o<c?s=setTimeout(v,3e3):t&&t(new Error(`Failed to load script after ${c} attempts`))}),e.appendChild(n,l)};v.call(void 0)};function re(r="password"){return e=>{let t=e.get(r)?.value,i=e.get("confirmPassword")?.value;return t===i?null:{passwordsMismatch:!0}}}export{N as a,F as b,k as c,w as d,h as e,X as f,T as g,ee as h,A as i,re as j,y as k};
