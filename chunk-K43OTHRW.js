import{a as P}from"./chunk-YJRBJEMI.js";import{a as G}from"./chunk-P6OX5KW3.js";import{k as O}from"./chunk-NLB5HRRX.js";import{a as K}from"./chunk-5I5XZVIT.js";import"./chunk-5NPNKZ3O.js";import{g as q,i as J}from"./chunk-VE6ZJ4JM.js";import{Ab as s,B as A,Bb as d,Fb as M,Gb as u,Kb as v,Lb as c,O as I,Pa as V,R as z,Sa as l,Xb as m,Yb as S,aa as g,bc as U,cc as w,dc as p,fa as _,fb as B,fc as $,ga as x,kc as k,mc as j,nc as H,o as D,pa as f,pb as N,qb as C,rb as b,sb as E,t as L,tb as h,ub as y,z as F,zb as r}from"./chunk-VRT4WXDD.js";function R(t,i){if(t&1&&(r(0,"a",5),d(1,"img",7),r(2,"div",8)(3,"h3",9),m(4),s(),r(5,"div",10)(6,"div",11),d(7,"span",12),r(8,"span",13),m(9),k(10,"date"),s()(),r(11,"div",11),d(12,"span",14),r(13,"span",13),m(14,"100/100"),s()()()()()),t&2){let e=c().$implicit,n=c();u("href",n.certificatebaseUrl+e.id,V),l(4),S(e.courseName),l(5),S(j(10,3,e.courseEndDate,"shortDate"))}}function W(t,i){t&1&&(r(0,"div",6),d(1,"div",15),r(2,"div",16),d(3,"div",17),r(4,"div",10),d(5,"div",18)(6,"div",18),s()()())}function X(t,i){if(t&1&&C(0,R,15,6,"a",5)(1,W,7,0,"div",6),t&2){let e=i.$implicit;b(e?0:1)}}function Y(t,i){t&1&&(r(0,"div",3)(1,"span"),m(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0634\u0647\u0627\u062F\u0627\u062A \u062D\u0627\u0644\u064A\u0627."),s()())}function Z(t,i){if(t&1){let e=M();r(0,"input",22),v("change",function(){let a=_(e).$index,o=c(3);return x(o.paginateHandler(a))}),s()}if(t&2){let e=i.$implicit,n=i.$index;c(3);let a=p(1);u("checked",a===n),N("aria-label",e)}}function ee(t,i){if(t&1){let e=M();r(0,"div",19)(1,"button",20),v("click",function(){_(e);let a=c(2),o=p(1);return x(o>0&&a.paginateHandler(o-1))}),m(2," \xAB "),s(),h(3,Z,1,2,"input",21,E),r(5,"button",20),v("click",function(){_(e);let a=c(2),o=p(0),T=p(1);return x(T<o.length&&a.paginateHandler(T+1))}),m(6," \xBB "),s()()}if(t&2){c(2);let e=p(0),n=p(1);l(),u("disabled",n==0),l(2),y(e),l(2),u("disabled",n==e.length-1)}}function te(t,i){if(t&1&&C(0,ee,7,2,"div",19),t&2){c();let e=p(0);b(e.length?0:-1)}}function ie(t,i){t&1&&d(0,"div",4)}var Q=class t{certificateService=g(P);toastService=g(K);userID=g(O).user()?.id;page=f(0);size=f(10);userCertificates=f(Array(this.size()));paginationPages=f(null);certificatebaseUrl=G.baseUrl+"/api/FileManage/Image/5/false/";ngOnInit(){this.certificateService.getUserCertificates(this.userID,1).pipe(z(({list:i,pagination:{total_pages:e}})=>A(()=>e>1,F(Array.from({length:e-1},(n,a)=>this.certificateService.getUserCertificates(this.userID,a+2))).pipe(L(n=>{let a=Array.from(new Map(i.concat(n.map(o=>o.list).flat()).map(o=>[o.id,o])).values());return a.reverse(),a})),D(i))),I(3)).subscribe({next:i=>{this.userCertificates.set(i),this.paginationPages.set(Array.from({length:Math.ceil(i.length/this.size())},(e,n)=>++n))},error:i=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:i.message})}})}paginateHandler(i){this.page.set(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=B({type:t,selectors:[["app-my-certificates"]],features:[$([P])],decls:12,vars:8,consts:[[1,"flex","flex-col","gap-10"],[1,"text-lg","lg:text-3xl","font-bold","text-body-5","pb-4","border-b","border-dashed","border-base-content","dark:border-custom-1"],[1,"lg:pe-25","flex","flex-col","gap-4"],["role","alert",1,"col-span-4","alert","alert-info","justify-center","alert-soft"],[1,"skeleton","self-center","w-4/5","lg:w-1/4","h-6","lg:h-10"],["target","_blank",1,"py-2","px-3","lg:px-6","border","border-dashed","border-base-content","rounded-sm","flex","gap-3","lg:gap-6","cursor-pointer",3,"href"],[1,"flex","gap-6"],["src","images/certificate.svg","alt","certificate-img",1,"w-8","h-8","lg:w-14","lg:h-14"],[1,"flex-1","flex","flex-col","gap-3","lg:gap-4"],[1,"text-sm","lg:text-xl","text-body-5"],[1,"flex","gap-7"],[1,"flex","items-center","gap-2"],[1,"iconify","uil--calendar","text-lg","lg:text-2xl","text-base-content"],[1,"text-xs","lg:text-base","text-base-content"],[1,"iconify","mdi--ab-testing","text-lg","lg:text-2xl","text-base-content"],[1,"skeleton","w-8","h-8","lg:w-14","lg:h-14"],[1,"flex-1"],[1,"skeleton","w-full","h-8","lg:h-10","mb-3","lg:mb-4"],[1,"skeleton","flex-1","h-5","lg:h-6"],[1,"join","self-center"],[1,"join-item","btn","btn-square",3,"click","disabled"],["type","radio",1,"join-item","btn","btn-square",3,"checked"],["type","radio",1,"join-item","btn","btn-square",3,"change","checked"]],template:function(e,n){if(e&1&&(U(0)(1),r(2,"section",0)(3,"h2",1),m(4," \u0634\u0647\u0627\u062F\u0627\u062A\u064A "),s(),r(5,"div",2),h(6,X,2,1,null,null,E,!1,Y,3,0,"div",3),k(9,"slice"),s(),C(10,te,1,1)(11,ie,1,0,"div",4),s()),e&2){let a=w(n.paginationPages());l();let o=w(n.page());l(5),y(H(9,4,n.userCertificates(),o*n.size(),o*n.size()+n.size())),l(4),b(a?10:11)}},dependencies:[J,q],encapsulation:2})};export{Q as MyCertificates};
