import{a as A}from"./chunk-I7NWHDQ5.js";import{a as O}from"./chunk-QAHX55GP.js";import"./chunk-HDPWHBWK.js";import"./chunk-MKHHFYBJ.js";import{a as T}from"./chunk-4K53BFH3.js";import{a as N}from"./chunk-HAMK3S2O.js";import{d as $}from"./chunk-XFF56OW5.js";import{i as H}from"./chunk-E7G3M2PQ.js";import{Fb as k,I as B,Jb as y,Lb as l,Sa as o,Xb as u,Yb as M,a as d,aa as _,b as m,bc as L,cc as V,dc as g,fa as f,fb as E,fc as z,ga as C,kc as F,nc as j,pa as x,pb as I,qb as v,rb as b,sb as D,tb as S,ub as w,vb as c,wb as s,xb as r,yb as p}from"./chunk-2ZBRTNB4.js";function q(t,i){if(t&1&&(s(0,"h2",7),u(1),r(),p(2,"img",8)),t&2){l();let e=g(0);o(),M(e.name)}}function R(t,i){t&1&&p(0,"div",9)(1,"div",10)}function G(t,i){if(t&1&&p(0,"app-course-card",3),t&2){let e=i.$implicit;c("course",e)}}function J(t,i){t&1&&(s(0,"div",4)(1,"span"),u(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u0648\u0631\u0633\u0627\u062A \u062D\u0627\u0644\u064A\u0627\u064B \u0644\u0647\u0630\u0627 \u0627\u0644\u0642\u0633\u0645."),r()())}function K(t,i){if(t&1){let e=k();s(0,"input",13),y("change",function(){let n=f(e).$index,h=l(2);return C(h.paginateHandler(n))}),r()}if(t&2){let e=i.$implicit,a=i.$index;l(2);let n=g(0);c("checked",n.pagination.current_page===a),I("aria-label",e)}}function Q(t,i){if(t&1){let e=k();s(0,"div",5)(1,"button",11),y("click",function(){f(e);let n=l();return C(n.page()>0&&n.paginateHandler(n.page()-1))}),u(2," \xAB "),r(),S(3,K,1,2,"input",12,D),s(5,"button",11),y("click",function(){f(e);let n=l(),h=g(0);return C(n.page()<h.pagination.total_pages&&n.paginateHandler(n.page()+1))}),u(6," \xBB "),r()()}if(t&2){let e=l(),a=g(0);o(),c("disabled",e.page()==0),o(2),w(a.pagination.pages),o(2),c("disabled",e.page()==a.pagination.total_pages-1)}}function U(t,i){t&1&&p(0,"div",6)}var P=class t{route=_($);courseService=_(A);toastService=_(N);courseDepartmentSignal=x({list:Array(12)});page=x(0);size=x(12);ngOnInit(){this.getCoursesByDepartmentHandler()}getCoursesByDepartmentHandler(){let i=T.find(e=>e.path.includes(this.route.snapshot.params.categoryId))??T[0];this.courseService.getAllCoursesByDepartmentId(i.id).pipe(B(5e3)).subscribe({next:e=>{this.courseDepartmentSignal.set(m(d({},i),{list:e,pagination:{current_page:0,total_count:e.length,pages:Array.from({length:Math.ceil(e.length/this.size())},(a,n)=>++n),total_pages:Math.ceil(e.length/this.size()),total_items:e.length}}))},error:e=>{this.toastService.addToast({id:Date.now(),type:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0627 \u0645\u0627",message:e.message})}})}paginateHandler(i){this.page.set(i),this.courseDepartmentSignal.update(e=>m(d({},e),{pagination:m(d({},e.pagination),{current_page:i})}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-category"]],features:[z([A])],decls:12,vars:8,consts:[[1,"container","flex","flex-col","gap-7","lg:gap-10","py-14"],[1,"flex","items-center","flex-col"],[1,"grid","grid-cols-2","md:grid-cols-3","xl:grid-cols-4","gap-2.5","lg:gap-5"],[3,"course"],["role","alert",1,"col-span-4","alert","alert-info","justify-center","alert-soft"],[1,"join","self-center"],[1,"skeleton","self-center","w-4/5","lg:w-1/4","h-6","lg:h-10"],[1,"text-2xl","lg:text-[45px]","text-body-5","font-bold"],["src","images/check.svg",1,"w-20.5","lg:w-auto"],[1,"skeleton","w-3/4","lg:w-1/6","h-8","lg:h-14","mb-3"],[1,"skeleton","w-17","lg:w-28","h-6","lg:h-10"],[1,"join-item","btn","btn-square",3,"click","disabled"],["type","radio",1,"join-item","btn","btn-square",3,"checked"],["type","radio",1,"join-item","btn","btn-square",3,"change","checked"]],template:function(e,a){if(e&1&&(L(0),s(1,"section",0)(2,"div",1),v(3,q,3,1)(4,R,2,0),r(),s(5,"div",2),S(6,G,1,1,"app-course-card",3,D,!1,J,3,0,"div",4),F(9,"slice"),r(),v(10,Q,7,2,"div",5)(11,U,1,0,"div",6),r()),e&2){let n=V(a.courseDepartmentSignal());o(3),b(n.name?3:4),o(3),w(j(9,4,n.list,a.page()*a.size(),a.page()*a.size()+a.size())),o(4),b(n.pagination?10:11)}},dependencies:[O,H],encapsulation:2})};export{P as Category};
